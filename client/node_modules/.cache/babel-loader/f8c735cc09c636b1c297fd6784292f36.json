{"ast":null,"code":"import _slicedToArray from\"/Users/leipan/Desktop/release/React/Project/3-Blog/todolist-ts/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import TodoItem from'./components/TodoItem';import AddTodo from'./components/AddTodo';import{getTodos,addTodo,updateTodo,deleteTodo}from'./API';var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];useEffect(function(){fetchTodos();},[]);var fetchTodos=function fetchTodos(){getTodos().then(function(_ref){var todos=_ref.data.todos;return setTodos(todos);}).catch(function(err){return console.log(err);});};var handleSaveTodo=function handleSaveTodo(e,formData){e.preventDefault();addTodo(formData).then(function(_ref2){var status=_ref2.status,data=_ref2.data;if(status!==201){throw new Error('Error! Todo not saved');}setTodos(data.todos);}).catch(function(err){return console.log(err);});};var handleUpdateTodo=function handleUpdateTodo(todo){updateTodo(todo).then(function(_ref3){var status=_ref3.status,data=_ref3.data;if(status!==200){throw new Error('Error! Todo not updated');}setTodos(data.todos);}).catch(function(err){return console.log(err);});};var handleDeleteTodo=function handleDeleteTodo(_id){deleteTodo(_id).then(function(_ref4){var status=_ref4.status,data=_ref4.data;if(status!==200){throw new Error('Error! Todo not deleted');}setTodos(data.todos);}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsxs(\"main\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Todos\"}),/*#__PURE__*/_jsx(AddTodo,{saveTodo:handleSaveTodo}),todos.map(function(todo){return/*#__PURE__*/_jsx(TodoItem,{updateTodo:handleUpdateTodo,deleteTodo:handleDeleteTodo,todo:todo},todo._id);})]});};export default App;","map":{"version":3,"sources":["/Users/leipan/Desktop/release/React/Project/3-Blog/todolist-ts/client/src/App.tsx"],"names":["React","useEffect","useState","TodoItem","AddTodo","getTodos","addTodo","updateTodo","deleteTodo","App","todos","setTodos","fetchTodos","then","data","catch","err","console","log","handleSaveTodo","e","formData","preventDefault","status","Error","handleUpdateTodo","todo","handleDeleteTodo","_id","map"],"mappings":"gPAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,OAASC,QAAT,CAAmBC,OAAnB,CAA4BC,UAA5B,CAAwCC,UAAxC,KAA0D,OAA1D,CAEA,GAAMC,CAAAA,GAAa,CAAG,QAAhBA,CAAAA,GAAgB,EAAM,eACAP,QAAQ,CAAU,EAAV,CADR,wCACnBQ,KADmB,eACZC,QADY,eAG1BV,SAAS,CAAC,UAAM,CACdW,UAAU,GACX,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAY,CAC7BP,QAAQ,GACPQ,IADD,CACM,kBAAWH,CAAAA,KAAX,MAAGI,IAAH,CAAWJ,KAAX,OAAwCC,CAAAA,QAAQ,CAACD,KAAD,CAAhD,EADN,EAECK,KAFD,CAEO,SAACC,GAAD,QAAgBC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAhB,EAFP,EAGD,CAJD,CAMD,GAAMG,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,CAAD,CAAqBC,QAArB,CAA+C,CACpED,CAAC,CAACE,cAAF,GACAhB,OAAO,CAACe,QAAD,CAAP,CACCR,IADD,CACM,eAAsB,IAAnBU,CAAAA,MAAmB,OAAnBA,MAAmB,CAAXT,IAAW,OAAXA,IAAW,CAC3B,GAAIS,MAAM,GAAK,GAAf,CAAoB,CAClB,KAAM,IAAIC,CAAAA,KAAJ,CAAU,uBAAV,CAAN,CACD,CACDb,QAAQ,CAACG,IAAI,CAACJ,KAAN,CAAR,CACD,CANA,EAOAK,KAPA,CAOM,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAPN,EAQF,CAVA,CAYC,GAAMS,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,IAAD,CAAuB,CAC9CnB,UAAU,CAACmB,IAAD,CAAV,CACCb,IADD,CACM,eAAsB,IAAnBU,CAAAA,MAAmB,OAAnBA,MAAmB,CAAXT,IAAW,OAAXA,IAAW,CACxB,GAAIS,MAAM,GAAK,GAAf,CAAoB,CAClB,KAAM,IAAIC,CAAAA,KAAJ,CAAU,yBAAV,CAAN,CACD,CACDb,QAAQ,CAACG,IAAI,CAACJ,KAAN,CAAR,CACD,CANH,EAOGK,KAPH,CAOS,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAPT,EAQD,CATD,CAWA,GAAMW,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,GAAD,CAAuB,CAC9CpB,UAAU,CAACoB,GAAD,CAAV,CACCf,IADD,CACM,eAAsB,IAAnBU,CAAAA,MAAmB,OAAnBA,MAAmB,CAAXT,IAAW,OAAXA,IAAW,CACxB,GAAIS,MAAM,GAAK,GAAf,CAAoB,CAClB,KAAM,IAAIC,CAAAA,KAAJ,CAAU,yBAAV,CAAN,CACD,CACDb,QAAQ,CAACG,IAAI,CAACJ,KAAN,CAAR,CACD,CANH,EAOGK,KAPH,CAOS,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAPT,EAQD,CATD,CAWA,mBACE,cAAM,SAAS,CAAC,KAAhB,wBACE,gCADF,cAEE,KAAC,OAAD,EAAS,QAAQ,CAAEG,cAAnB,EAFF,CAGGT,KAAK,CAACmB,GAAN,CAAU,SAACH,IAAD,qBACT,KAAC,QAAD,EAEE,UAAU,CAAED,gBAFd,CAGE,UAAU,CAAEE,gBAHd,CAIE,IAAI,CAAED,IAJR,EACOA,IAAI,CAACE,GADZ,CADS,EAAV,CAHH,GADF,CAcD,CA7DD,CA+DA,cAAenB,CAAAA,GAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport TodoItem from './components/TodoItem'\nimport AddTodo from './components/AddTodo'\nimport { getTodos, addTodo, updateTodo, deleteTodo } from './API'\n\nconst App: React.FC = () => {\n  const [todos, setTodos] = useState<ITodo[]>([])\n\n  useEffect(() => {\n    fetchTodos()\n  }, [])\n\n  const fetchTodos = (): void => {\n    getTodos()\n    .then(({ data: { todos } }: ITodo[] | any) => setTodos(todos))\n    .catch((err: Error) => console.log(err))\n  }\n\n const handleSaveTodo = (e: React.FormEvent, formData: ITodo): void => {\n   e.preventDefault()\n   addTodo(formData)\n   .then(({ status, data }) => {\n    if (status !== 201) {\n      throw new Error('Error! Todo not saved')\n    }\n    setTodos(data.todos)\n  })\n  .catch((err) => console.log(err))\n}\n\n  const handleUpdateTodo = (todo: ITodo): void => {\n    updateTodo(todo)\n    .then(({ status, data }) => {\n        if (status !== 200) {\n          throw new Error('Error! Todo not updated')\n        }\n        setTodos(data.todos)\n      })\n      .catch((err) => console.log(err))\n  }\n\n  const handleDeleteTodo = (_id: string): void => {\n    deleteTodo(_id)\n    .then(({ status, data }) => {\n        if (status !== 200) {\n          throw new Error('Error! Todo not deleted')\n        }\n        setTodos(data.todos)\n      })\n      .catch((err) => console.log(err))\n  }\n\n  return (\n    <main className='App'>\n      <h1>My Todos</h1>\n      <AddTodo saveTodo={handleSaveTodo} />\n      {todos.map((todo: ITodo) => (\n        <TodoItem\n          key={todo._id}\n          updateTodo={handleUpdateTodo}\n          deleteTodo={handleDeleteTodo}\n          todo={todo}\n        />\n      ))}\n    </main>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}